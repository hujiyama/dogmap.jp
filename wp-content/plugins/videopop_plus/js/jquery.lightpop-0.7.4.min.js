/**
 * jQuery lightpop plugin
 * This jQuery plugin was inspired on jQuery lightBox plugin by Leandro Vieira Pinho (http://leandrovieira.com/projects/jquery/lightbox/)
 * @name jquery.lightpop-0.7.4.min.js
 * @author wokamoto - http://dogmap.jp
 * @version 0.7.4
 * @date January 8, 2009
 * @category jQuery plugin
 * @copyright (c) 2007-2009 wokamoto (dogmap.jp)
 * @license  Released under the GPL license (http://www.gnu.org/copyleft/gpl.html)
 * @example http://dogmap.jp/lightpop_sample/sample.html
 */
(function(a){a.browser=a.extend({chrome:/chrome/.test(navigator.userAgent.toLowerCase())},a.browser);a.fn.lightpop=function(Y){var G="lightpop";var c="images/";var g=c+G+"-",B=c+"icon-";Y=a.extend(true,{overlayBgColor:"#000",overlayOpacity:0.7,contentFrameType:"border",contentBorder:"none",boxBorderSize:6,containerBorderSize:10,containerResizeSpeed:"normal",contentBgColor:"#FFF",imageBox:g+"box.gif",imageBorderL:g+"border-l.gif",imageBorderR:g+"border-r.gif",imageLoading:g+"ico-loading.gif",imageBtnPrev:g+"btn-prev.gif",imageBtnNext:g+"btn-next.gif",imageBtnClose:g+"btn-close.gif",imageBlank:g+"blank.gif",imageBtnPrevWidth:63,imageBtnNextWidth:63,imageBtnCloseWidth:66,txtImage:null,txtOf:"of",setLinkToTitle:false,keyToClose:"c",keyToPrev:"p",keyToNext:"n",flvplayer:"mediaplayer.swf",iconAdd:true,detailsEnabled:true,initSize:250,defaultLater:1500,Image:{enabled:true,icon:B+"image.png",param:{},size:new Array(0,0)},Contents:{enabled:true,icon:B+"contents.png",param:{},size:new Array(0,0),iframeEnabled:true},Video:{enabled:true,icon:B+"video.png",param:{},size:new Array(320,240)},YouTube:{enabled:true,icon:B+"youtube.png",param:{hl:"ja"},size:new Array(425,355)},Metacafe:{enabled:true,icon:B+"metacafe.png",param:{},size:new Array(400,345)},LiveLeak:{enabled:true,icon:B+"liveleak.png",param:{},size:new Array(450,370)},GoogleVideo:{enabled:true,icon:B+"googlevideo.png",param:{hl:"ja"},size:new Array(400,326)},ifilm:{enabled:true,icon:B+"ifilm.png",param:{},size:new Array(448,365)},Dailymotion:{enabled:true,icon:B+"dailymotion.png",param:{},size:new Array(420,330)},superdeluxe:{enabled:true,icon:B+"superdeluxe.png",param:{},size:new Array(400,350)},nicovideo:{enabled:true,icon:B+"nicovideo.png",param:{},size:new Array(312,176)}},Y);if(Y.imageMaxWidth||Y.imageMaxHeight){Y=a.extend(true,Y,{Image:{size:new Array((Y.imageMaxWidth||0),(Y.imageMaxHeight||0))}})}var k=(/^border$/i).test(Y.contentFrameType);var N=new Array();N.length=0;var ac=document,M=window;var ad=ac.body,ab=ac.documentElement,l=ac.images;var m=a.browser.msie,L=a.browser.mozilla,K=a.browser.opera,o=a.browser.safari||a.browser.chrome,x=!(ac.compatMode&&ac.compatMode!=="BackCompat");var J={Image:{match:function(b){return(Y.Image.enabled&&(/\.(jpe?g|gif|png|bmp)$/i).test(b))},base:"/",defaultSize:Y.Image.size,set:function(b){E(b,true)},preload:function(b){E(b,false)}},Video:{match:function(b){return(Y.Video.enabled&&(/\.(flv|swf|rm|mov|3gp|mp4|asf|avi|mpg|wmv)$/i).test(b))},defaultSize:Y.Video.size,getInfo:function(ai,e,aj,ak,b){var w={};var ah=ai.replace(/\?.*$/,"");var al="true";var d=false;switch(ah.toLowerCase().match(/\.(flv|swf|rm|mov|3gp|mp4|asf|avi|mpg|wmv)$/i)[1]){case"flv":aj+=22;ah=Y.flvplayer+"?file="+ah;case"swf":w={quality:"high",bgcolor:"#000"};ah=D(ah,e,aj,w);break;case"rm":w={autostart:al,controls:"imagewindow,controlpanel"};ah=ag(ah,"CFCDAA03-8BE4-11CF-B84B-0020AFBBCCFA","audio/x-pn-realaudio-plugin",e,aj,w,"","",d,true);break;case"mov":case"mp4":case"3gp":aj+=20;w={href:ah,controller:"true",pluginspage:"http://www.apple.com/quicktime/download/",autoplay:al,bgcolor:"000000"};ah=ag(ah,"02BF25D5-8C17-4B23-BC80-D3488ABDDC6B","video/quicktime",e,aj,w,' codebase="http://www.apple.com/qtactivex/qtplugin.cab"',"",d,true);break;case"wmv":aj+=20;w={AutoStart:al,URL:ah,uiMode:"full"};d='src="'+ah+'" name="player" width="'+e+'" height="'+aj+'" type="application/x-mplayer2" pluginurl="http://www.microsoft.com/windows/windowsmedia" allowchangedisplaysize="1" autosize="1" displaysize="1" showcontrols="1" showstatusbar="0" autorewind="1" autostart="'+(al=="false"?"0":"1")+'"';ah=ag(ah,"6BF52A52-394A-11d3-B153-00C04F79FAA6","application/x-oleobject",e,aj,w,"","",d,false);break;default:aj+=20;w={href:ah,autostart:al,uiMode:"full"};ah=ag(ah,"6BF52A52-394A-11d3-B153-00C04F79FAA6","application/x-oleobject",e,aj,w,"","",d,false);break}return{content:ah,width:e,height:aj,later:Math.round(Y.defaultLater*2/3)}}},YouTube:{match:function(b){return(Y.YouTube.enabled&&(/\.youtube\.com\/watch/i).test(b))},base:"http://www.youtube.com/v/",defaultSize:Y.YouTube.size,getInfo:function(ah,d,ai,aj,b){var e={};var ak=ah.replace(/^.*\?v=(.*)$/i,"$1");var w=b.base+ak;for(var al in aj){w+="&"+(al!=="fmt"?al+"="+aj[al]:"&ap=%2526fmt%3D"+aj[al])}w=D(w,d,ai,e);return{content:w,width:d,height:ai,later:Y.defaultLater}}},Metacafe:{match:function(b){return(Y.Metacafe.enabled&&(/\.metacafe\.com\/watch/i).test(b))},base:"http://www.metacafe.com/fplayer/",defaultSize:Y.Metacafe.size,getInfo:function(aj,ai,e,ak,ah){var d={};var b=aj.replace(/^.*\/watch\/([\d]+\/[^\/]*)\/?.*$/i,"$1");var w=ah.base+b+".swf";w=D(w,ai,e,d,ak);return{content:w,width:ai,height:e,later:Y.defaultLater}}},LiveLeak:{match:function(b){return(Y.LiveLeak.enabled&&(/\.liveleak\.com\/view/i).test(b))},base:"http://www.liveleak.com/player.swf?autostart=false&amp;token=",defaultSize:Y.LiveLeak.size,getInfo:function(aj,ai,e,ak,ah){var d={quality:"high"};var b=aj.replace(/^.*\?i=(.*)$/i,"$1");var w=ah.base+b;w=D(w,ai,e,d,ak);return{content:w,width:ai,height:e,later:Y.defaultLater}}},GoogleVideo:{match:function(b){return(Y.GoogleVideo.enabled&&(/video\.google\.com\/videoplay/i).test(b))},base:"http://video.google.com/googleplayer.swf?docId=",defaultSize:Y.GoogleVideo.size,getInfo:function(aj,ai,e,ak,ah){var d={flashvars:""};var b=aj.replace(/^.*\?docid=([a-z\d\-]+).*$/i,"$1");var w=ah.base+b;w=D(w,ai,e,d,ak);return{content:w,width:ai,height:e,later:Y.defaultLater}}},ifilm:{match:function(b){return(Y.ifilm.enabled&&(/\.ifilm\.com\/video/i).test(b))},base:"http://www.ifilm.com/efp",defaultSize:Y.ifilm.size,getInfo:function(aj,ai,e,ak,ah){var d={flashvars:"flvbaseclip="+b+"&",quality:"high",bgcolor:"000000"};var b=aj.replace(/\?.*$/,"").replace(/^.*\/video\/([^\/]*)[\/]?$/i,"$1");var w=ah.base;w=D(w,ai,e,d,ak);return{content:w,width:ai,height:e,later:Y.defaultLater}}},Dailymotion:{match:function(b){return(Y.Dailymotion.enabled&&(/\.dailymotion\.com\/video/i).test(b))},base:"http://www.dailymotion.com/swf/",defaultSize:Y.Dailymotion.size,getInfo:function(aj,ai,e,ak,ah){var d={allowFullScreen:"true",allowScriptAccess:"always"};var b=aj.replace(/^.*\/video\/([^_]*).*$/i,"$1");var w=ah.base+b;w=D(w,ai,e,d,ak);return{content:w,width:ai,height:e,later:Y.defaultLater}}},superdeluxe:{match:function(b){return(Y.superdeluxe.enabled&&(/\.superdeluxe\.com\/sd/i).test(b))},base:"http://i.cdn.turner.com/sdx/static/swf/share_vidplayer.swf",defaultSize:Y.superdeluxe.size,getInfo:function(aj,ai,e,ak,ah){var d={allowFullScreen:"true",FlashVars:"id="+b};var b=aj.replace(/^.*\?id=(.*)$/i,"$1");var w=ah.base;w=D(w,ai,e,d,ak);return{content:w,width:ai,height:e,later:Y.defaultLater}}},nicovideo:{match:function(b){return(Y.nicovideo.enabled&&(/\.nicovideo\.jp\/watch/i).test(b))},base:"http://www.nicovideo.jp/watch/",defaultSize:Y.nicovideo.size,getInfo:function(ai,ah,d,aj,w){var b=ai.replace(/^.*\/watch\/(.*)$/i,"$1");var e=w.base+b;e='<iframe width="'+ah+'" height="'+d+'" src="http://www.nicovideo.jp/thumb/'+b+'" scrolling="no" style="border:solid 1px #CCC;" frameborder="0"><a href="'+e+'">'+w.tytle+"</iframe>";return{content:e,width:ah,height:d,later:Math.round(Y.defaultLater/3)}}},Contents:{match:function(b){return(Y.Contents.enabled&&RegExp(M.location.host,"i").test(b)&&!(/\.(jpe?g|gif|png|bmp)$/i).test(b))},defaultSize:Y.Contents.size,set:function(e){var b;var w=u(N[e].href);var d='width="'+w[0]+'" height="'+w[1]+'"';if(Y.Contents.iframeEnabled){b="<iframe "+d+' src="'+N[e].href+'" scrolling="no" style="border:solid 1px #CCC;" frameborder="0"><a href="'+N[e].href+'">'+N[e].tytle+"</a></iframe>";N[e]=a.extend(N[e],{content:b,width:w[0],height:w[1],later:500});X(e)}else{a.get(N[e].href,function(ai,ah){b="<div "+d+">"+ai.replace(/[\r\n]/g,"").replace(/.*<body.*?>(.*?)<\/body>.*$/,"$1").replace(/<script.*?>.*<\/script>/g,"")+"</div>";N[e]=a.extend(N[e],{content:b,width:w[0],height:w[1],later:500});X(e)})}},preload:function(b){},content_css:{textAlign:"left",lineHeight:"1.2em"}}};var U="overlay",p=G,Z=G+"-box",V=G+"-content",n=G+"-nav",R=G+"-data",A=G+"-details",z=G+"-loading";var y="#"+U,H="#"+p,v="#"+Z,S="#"+V,P="#"+n,f="#"+R,h="#"+A,Q="#"+z;var W=function(b){af(Y.imageBtnPrev,function(aj,ah,ai){Y.imageBtnPrevWidth=(ah>0?ah:Y.imageBtnPrevWidth);af(Y.imageBtnNext,function(am,ak,al){Y.imageBtnNextWidth=(ak>0?ak:Y.imageBtnNextWidth);af(Y.imageBtnClose,function(ap,an,ao){Y.imageBtnCloseWidth=(an>0?an:Y.imageBtnCloseWidth);if(!k){af(Y.imageBox,function(at,aq,ar){af(Y.imageBorderL,function(aw,au,av){af(Y.imageBorderR,function(az,ax,ay){Y.contentBorder="none"})})})}})})});var e=new Array();var d=0;b.filter("a").each(function(){var w=M.location;var ak=a(this);if(!(/^https?:/i).test(ak.attr("href"))&&(/^https?:/i).test(w.protocol)){ak.attr("href",((/^\//i).test(ak.attr("href"))?w.protocol+"//"+w.hostname+"/"+ak.attr("href"):w.href.replace(/^(.*\/).*$/i,"$1")+ak.attr("href").replace(/^\/?(.*)$/i,"$1")))}for(var ai in J){var ah=J[ai];if(ah.match(ak.attr("href").replace(/\?.*$/,""))){var aj=Y[ai];if(Y.iconAdd&&ak.children("img").length===0){ak.css({background:"transparent url("+aj.icon+") no-repeat scroll 1px 0pt",paddingLeft:"20px"})}N.push({type:ai,href:ak.attr("href"),title:ak.attr("title")||ak.html().replace(/<[^>]*>/ig,""),base:(ah.base?ah.base:"/")});ak.unbind("click").click((function(al){return function(){C(al);return false}})(d));e.push(this);d++;break}}});return new a(e)};var C=function(ak){j(a("embed, object, select"),false);var aj='<div id="'+V+'-wrap"><div id="'+V+'" /></div>';var w=(Y.detailsEnabled?'<div id="'+R+'-wrap"><div id="'+R+'"><div id="'+A+'"><div id="'+A+'-caption" /><div id="'+A+'-number" /></div><div id="'+R+'-nav"><a href="#" id="'+R+'-nav-close"><img src="'+Y.imageBtnClose+'" /></a></div></div></div>':"");var ai='<div id="'+n+'"><a href="#" id="'+n+'-prev" /><a href="#" id="'+n+'-next" /></div><div id="'+z+'"><a href="#" id="'+z+'-link"><img src="'+Y.imageLoading+'" /></a></div>';var e='<div id="'+U+'" /><div id="'+p+'"><div id="'+Z+'"><div id="'+Z+'-inner">'+(k?aj+"</div>"+w:'<div id="'+Z+'-hd"><div id="'+Z+'-hdc" /></div><div id="'+Z+'-bd"><div id="'+Z+'-bdc">'+aj+w+'</div></div><div id="'+Z+'-ft"><div id="'+Z+'-ftc" /></div></div>')+ai+"</div></div>";a("body").append(a(e).hide());var al=r();var b=i();var d=Y.containerBorderSize;a(y+","+H+","+P+","+Q).css({position:"absolute"});a(v+","+f).css({position:"relative"});a(y).css({top:0,left:0,backgroundColor:Y.overlayBgColor,opacity:Y.overlayOpacity,width:al[0],height:al[1],zIndex:90});a(H).css({top:b[1]+Math.round(al[3]/10),left:b[0],width:"100%",height:0,overflow:"visible",textAlign:"center",lineHeight:0,border:"none",zIndex:100});a(H+" a img").css({border:"none"});a(v).css({width:Y.initSize,height:Y.initSize,top:0,margin:"0 auto",padding:0,backgroundColor:Y.contentBgColor,border:Y.contentBorder,overflow:(k?"hidden":"visible")});a(v+"-inner").css({width:Y.initSize,height:Y.initSize,backgroundColor:"transparent",margin:"0 auto",padding:(k?d:0),overflow:(k?"hidden":"visible")});a(S+"-wrap").css({backgroundColor:"transparent"});a(S).css({margin:(k?0:"0 auto"),padding:(k?0:d+"px 0"),zIndex:110});if(!k){var ah=Y.boxBorderSize;F(false).css({position:"relative"}).hide();a(v+"-hd,"+v+"-hdc").css({height:ah,top:0});a(v+"-ft,"+v+"-ftc").css({height:ah,bottom:0});a(v+"-hd,"+v+"-ft").css({margin:"0 "+ah+"px 0 0"});a(v+"-hdc,"+v+"-ftc").css({margin:"0 "+ah*-1+"px 0 "+ah+"px"})}a(P).css({top:0,left:0,height:"10px",width:"100%",padding:0,margin:(k?"0":Y.boxBorderSize+"px")+" auto",zIndex:10});a(P+" a").css({display:"block",height:"100%",zoom:1,margin:(k?0:"0 "+Y.boxBorderSize+"px"),outline:"none"});a(P+"-prev").css({width:Y.imageBtnPrevWidth,left:0,styleFloat:"left"});a(P+"-next").css({width:Y.imageBtnNextWidth,right:0,styleFloat:"right"});a(Q).css({top:"40%",left:0,height:"20%",width:"100%",margin:"0 auto",textAlign:"center",lineHeight:0});if(Y.detailsEnabled){a(f+"-wrap").css({font:"10px Verdana, Helvetica, sans-serif",backgroundColor:Y.contentBgColor,lineHeight:"1.4em",width:"100%",margin:"0 auto",padding:"0 "+d+"px 0",overflow:"hidden"}).hide();a(f).css({padding:"0 "+d+"px",color:"#666",left:0,bottom:0});a(h).css({width:"70%",styleFloat:"left",textAlign:"left"});a(h+"-caption").css({styleFloat:"left","font-weight":"bold",width:"100%"});a(h+"-number").css({styleFloat:"left",clear:"left",width:"100%","padding-bottom":"1em"});a(f+"-nav-close").css({styleFloat:"right",width:Y.imageBtnCloseWidth,padding:".35em 0"})}a(y).fadeIn(Y.containerResizeSpeed,function(){a(H).show()});a(y+","+Q+"-link,"+f+"-nav-close").click(function(){I();return false});ae(true);t(ak)};var t=function(b){j(a(f+","+h+","+h+"-caption,"+h+"-number,"+f+"-nav-close"),false);a(P+","+P+"-prev,"+P+"-next").hide();a(S).hide().children().remove();a(Q+","+v+","+v+"-inner").show();F(false);if(Y.detailsEnabled&&!k&&o){a(f+"-wrap").height("auto")}X(b)};var X=function(b){(N[b].content?function(d){a(S).append(a(N[d].content));setTimeout(function(){aa(d)},N[d].later)}:(J[N[b].type].set?J[N[b].type].set:(function(d){q(d);X(d)})))(b)};var T=function(e,d,b,w){if(Y.detailsEnabled){w=(w<28?28:w);b+=w}(k?(function(ah){a(v).animate({width:d,height:b},"fast",function(){j(ah,true)})}):(function(ah){if(Y.detailsEnabled&&o){a(f+"-wrap").height(w)}j(ah,true)}))(e)};var aa=function(ak){var e=Y.containerBorderSize,aj=Y.boxBorderSize;var b=N[ak];var w=b.width+(e+(k?0:aj))*2;var d=b.height+e*2;var ah=r();var ai=i();a(H).animate({top:ai[1]+Math.round(ah[3]/10),left:ai[0]},Y.containerResizeSpeed,function(){a(v).animate({width:w,height:d},Y.containerResizeSpeed,function(){var al=J[b.type];a(v+"-inner").css({width:(k?b.width:w),height:b.height});a(S).css({width:b.width,height:b.height});if(Y.detailsEnabled){a(f+"-wrap").css({width:b.width})}if(al.content_css){a(S).children().css(al.content_css)}a(Q).hide();if((/<object.*>/i).test(b.content)){a(S).show()}else{a(S).fadeIn()}F(true);a(h+"-caption").html((Y.setLinkToTitle?'<a href="'+b.href+'" title="'+b.title+'">'+b.title+"</a>":b.title));a(h+"-number").html((Y.txtImage||b.type)+(N.length>1?" "+(ak+1)+" "+Y.txtOf+" "+N.length:""));var am=j(a(f+","+h+","+h+"-caption,"+h+"-number,"+f+"-nav-close"),false).show();(Y.detailsEnabled?function(ap,an,ao){a(f+"-wrap").slideDown("fast",function(){T(ap,an,ao,(!o?a(this).height():this.scrollHeight))})}:function(ap,an,ao){T(ap,an,ao)})(am,w,d);a(P).css({width:w}).show(function(){a(P+"-prev,"+P+"-next").css({height:Math.round(d/3),background:"transparent url("+Y.imageBlank+") no-repeat"}).unbind();if(ak!=0){a(P+"-prev").hover(function(){a(this).css({background:"url("+Y.imageBtnPrev+") left 30% no-repeat"})},function(){a(this).css({background:"transparent url("+Y.imageBlank+") no-repeat"})}).show().click((function(an){return function(){t(an);return false}})(ak-1))}if(ak!=(N.length-1)){a(P+"-next").hover(function(){a(this).css({background:"url("+Y.imageBtnNext+") right 30% no-repeat"})},function(){a(this).css({background:"transparent url("+Y.imageBlank+") no-repeat"})}).show().click((function(an){return function(){t(an);return false}})(ak+1))}O(true,ak)});if(N.length-1>ak){s(ak+1)}if(ak>0){s(ak-1)}})})};var s=function(b){if(!N[b].content){(J[N[b].type].preload?J[N[b].type].preload:(function(d){q(d)}))(b)}};var u=function(e,d,aj){var ai=0,b=0;var w=e.toLowerCase().replace(/[\r\n]/g,"").replace(/["']/g,"").match(/(width|height)=(\d+)/ig);if(w){a.each(w,function(){if((/^width=\d+$/i).test(this)){ai=Number(this.replace(/^width=(\d+)$/,"$1"))}if((/^height=\d+$/i).test(this)){b=Number(this.replace(/^height=(\d+)$/,"$1"))}})}if(ai===0||b===0){if(d){ai=d[0];b=d[1]}else{var ah=r();ai=ah[0]/4;b=ah[1]/4}}if(aj){if(aj[0]!=0&&ai>aj[0]){b=b*(aj[0]/ai);ai=aj[0]}if(aj[1]!=0&&b>aj[1]){ai=ai*(aj[1]/b);b=aj[1]}}return new Array(Math.round(ai),Math.round(b))};var q=function(al){var e=N[al];var b=Y[e.type];var w=J[e.type];var ai=e.href.replace(/&.*$/i,"");var d,aj={};var ak,ah=null;if((/\?.*$/).test(e.href)){var am=e.href.replace(/^.*\?/,"").split("&");if(am.length>0){a.each(am,function(){var ao,an=this.toString();if(!(/^(width|height|v|i|docid|id)\=.*$/i).test(an)){ao=(an).match(/^([^=]*)=(.*)$/i);if(ao.length>2){aj[ao[1]]=ao[2]}}})}}aj=a.extend(aj,b.param);d=u(e.href,w.defaultSize);N[al]=a.extend(e,w.getInfo(ai,d[0],d[1],aj,e))};var D=function(d,ah,b,aj,ai){var w="";if(typeof ai==="object"){a.each(ai,function(ak){if(d.indexOf(ak+"=")<0){d+=(d.indexOf("?")<0?"?":"&")+ak+"="+this}})}var e={movie:d,wmode:"transparent"};aj=(aj?a.extend(e,aj):e);w='<object width="'+ah+'" height="'+b+'" data="'+d+'" type="application/x-shockwave-flash" wmode="'+aj.wmode+'">';a.each(aj,function(ak){w+='<param name="'+ak+'" value="'+this+'" />'});w+="</object>";return w};var ag=function(d,ai,an,e,ao,ah,ap,b,am,al){var ak="",w="";var aj={src:d,width:e,height:ao,type:an};ah=(ah?a.extend(aj,ah):aj);ak+='<object width="'+e+'" height="'+ao+'"'+(ai!=" "?'classid="clsid:'+ai+'"':"")+' type="'+an+'" '+b+">";a.each(ah,function(aq){ak+='<param name="'+aq+'" value="'+this+'" />'});w+="<embed ";if(am!==false){w+=am}else{w+='width="'+e+'" height="'+ao+'"';a.each(ah,function(aq){w+=" "+aq+'="'+this+'"'})}w+=">"+(al?'<noembed><a href="'+d+'">'+d+"</a></noembed>":"")+"</embed>";ak+=w+"</object>";return ak};var F=function(ai){if(!k){var ah=a(v+"-hd, "+v+"-hdc, "+v+"-bd, "+v+"-bdc, "+v+"-ft, "+v+"-ftc");var e="transparent",d=Y.contentBgColor;if(ai){var b=Y.imageBox,aj=Y.imageBorderL,w=Y.imageBorderR;a(v).css({backgroundColor:e});a(v+"-hd").css({background:e+" url("+b+") left top no-repeat"});a(v+"-hdc").css({background:e+" url("+b+") right top no-repeat"});a(v+"-bd").css({background:d+" url("+aj+") left top repeat-y"});a(v+"-bdc").css({background:e+" url("+w+") right top repeat-y"});a(v+"-ft").css({background:e+" url("+b+") left bottom no-repeat"});a(v+"-ftc").css({background:e+" url("+b+") right bottom no-repeat"});ah.show()}else{a(v).css({backgroundColor:d});ah.css({background:e})}return ah}};var E=function(d,b){af(N[d].href,(function(w,e){return function(aj,ai,ah){var ak=u(aj,new Array(ai,ah),Y.Image.size);N[w]=a.extend(N[w],{content:'<img src="'+aj.replace(/\?.*$/,"")+'" width="'+ak[0]+'" height="'+ak[1]+'" />',width:ak[0],height:ak[1],later:(m?250:100)});if(e){X(w)}}})(d,b))};var af=function(b,ak,ai,e,al){ak=ak||function(){};ai=ai||function(){};e=e||10;al=al||2000;for(var d=0,aj=l.length;d<aj;++d){if(l[d].src===b&&l[d].complete){ak(b,l[d].width,l[d].height);return}}var w=new Image(),ah=0;w.finish=false;w.onabort=w.onerror=function(){if(w.finish){return}w.finish=true;ai(b)};w.onload=function(){w.finish=true;if(K&&!w.complete){ai(b);return}ak(b,w.width,w.height)};w.src=b;if(!w.finish&&al){setTimeout(function(){if(w.finish){return}if(w.complete){w.finish=true;if(w.width){return}ai(b);return}if((ah+=e)>al){w.finish=true;ai(b);return}setTimeout(arguments.callee,e)},0)}};var j=function(d,b){return d.css({visibility:(b?"visible":"hidden")})};var O=function(b,d){a(ac).unbind("keydown");if(b){a(ac).keydown(function(ah){var e=(ah||event).keyCode;var w=(ah?ah.DOM_VK_ESCAPE:27);var ai=String.fromCharCode(e).toLowerCase();if((ai==Y.keyToClose)||(ai=="x")||(e==w)){I()}else{if(((ai==Y.keyToPrev)||(e==37))&&d!=0){t(d-1)}else{if(((ai==Y.keyToNext)||(e==39))&&d!=(N.length-1)){t(d+1)}}}})}};var ae=function(b){a(M).unbind("resize");if(b){a(M).resize(function(){var d=r();var e=i();a(y).css({width:d[0],height:d[1]});a(H).css({top:e[1]+Math.round(d[3]/10),left:e[0]})})}};var r=function(){var b=(ab&&ab.scrollWidth?ab:ad).scrollWidth;var e=(ab&&ab.scrollHeight?ab:ad).scrollHeight;var d=(x?ad:ab).clientWidth;var w=(x?ad:ab).clientHeight;b=(b<d?b:d);e=(e<w?w:e);return new Array(b,e,d,w)};var i=function(){var b=(ab&&ab.scrollLeft?ab:ad).scrollLeft;var d=(ab&&ab.scrollTop?ab:ad).scrollTop;return new Array(b,d)};var I=function(){j(a("object",a(H)),false).remove();a(H).height(a(v).height()).slideUp(function(){a(this).remove();a(y).fadeOut(function(){a(this).remove();j(a("embed, object, select"),true)})});O(false);ae(false)};return W(this)}})(jQuery);