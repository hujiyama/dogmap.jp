<?php
Class cache_manager {
	static public function to_gmt( $now = null ) {
		return gmdate( 'D, d M Y H:i:s',  ( $now == null ) ? time() : $now );
	}

	static public function last( $time = null ) {
		$gmt = self::to_gmt( $time );
		header("Last Modified: $gmt");
	}

	static public function expires( $expire ) {
		$gmt = self::to_gmt( time() + $expire );
		header("Expires: $gmt");
	}

	static public function cache_control( $options ) {
		header("Cache-Control: $options");
	}
}
function cache_control(){
	if (!is_user_logged_in()) {
		cache_manager::cache_control( "public,max-age=30");
		cache_manager::expires(30);
		cache_manager::last();
	}
}
add_action('init', 'cache_control');
