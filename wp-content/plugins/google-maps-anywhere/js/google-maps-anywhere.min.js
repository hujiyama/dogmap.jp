/**
 * Added Google Maps
 * @name googlemaps-anywhere.min.js
 * @author wokamoto - http://dogmap.jp
 * @version 1.2.4
 * @date March 31, 2010
 * @copyright (c) 2008 - 2010 wokamoto (dogmap.jp)
 * @license  Released under the GPL license (http://www.gnu.org/copyleft/gpl.html)
 * @requires jQuery v1.2.3 or later
 */
if(typeof google.maps==="undefined"){google.load("maps","2",{language:(typeof googlemapsAnywhereL10n!=="undefined"?googlemapsAnywhereL10n.language:"ja")})}google.setOnLoadCallback(function(){var c=jQuery.extend({markerTitle:"Move to the Google map.",cssPath:"div.googlemap",language:"ja",errMsgNoData:"Error: No panorama data was found.",errMsgNoFlash:"Error: Flash doesn't appear to be supported by your browser.",errMsgUnknown:"Error: Unknown Error.",mapsURL:"http://maps.google.com/maps"},googlemapsAnywhereL10n);var b={title:c.markerTitle};var a=function(d){return(/s?https?:\/\/[-_.!~*\'\(\)a-zA-Z0-9;\/?:\@&=+\$,%#]+/i).test(d)};jQuery(c.cssPath).each(function(){var f,l,e,q,d=false;var t=jQuery(this).children("a:first");var m=t.attr("href");var k=t.attr("title");var s=G_NORMAL_MAP;var h,j,g,r,p="n",o="";var i=false;switch(m.replace(/^.*(\?|\&|\&amp;)maptype=([^\&]+)[\&]?.*$/i,"$2").toUpperCase()){case"NORMAL":case"G_NORMAL_MAP":s=G_NORMAL_MAP;p="n";break;case"SATELLITE":case"G_SATELLITE_MAP":s=G_SATELLITE_MAP;p="h";break;case"HYBRID":case"G_HYBRID_MAP":s=G_HYBRID_MAP;p="h";break;case"PHYSICAL":case"G_PHYSICAL_MAP":s=G_PHYSICAL_MAP;p="p";break;case"STREETVIEW":i=true;break}if(!i){h=m.replace(/^.*(\?|\&|\&amp;)ll=([^\&]+)[\&]?.*$/i,"$2").split(",");if(/z=([-_.!~*\'\(\)a-zA-Z0-9;\/?:\@&=+\$,%#]+)/i.test(m)){r=Number(m.replace(/^.*(\?|\&|\&amp;)z=([\d]+)[\&]?.*$/i,"$2"));r=((r==NaN?0:r)>0?r:14)}else{r=14}if(/kml=([-_.!~*\'\(\)a-zA-Z0-9;\/?:\@&=+\$,%#]+)/i.test(m)){o=m.replace(/^.*(\?|\&|\&amp;)kml=([-_.!~*\'\(\)a-zA-Z0-9;\/?:\@&=+\$,%#]+)[\&]?.*$/i,"$2").replace(/%3A/ig,":").replace(/%2F/ig,"/");if(!a(o)){o=""}}else{o=""}}else{h=m.replace(/^.*(\?|\&|\&amp;)cbll=([^\&]+)[\&]?.*$/i,"$2").split(",");if(/cbp=([-_.!~*\'\(\)a-zA-Z0-9;\/?:\@&=+\$,%#]+)/i.test(m)){var n=m.replace(/^.*(\?|\&|\&amp;)cbp=([^\&]+)[\&]?.*$/i,"$2").split(",");j=(n.length>=2?Number(n[1]):0);r=(n.length>=4?Number(n[3]):5);g=(n.length>=5?Number(n[4]):0)}else{j=0;r=5;g=0}}if(h.length>=2){q=new google.maps.LatLng(Number(h[0]),Number(h[1]));if(q){m=c.mapsURL+"?f=q&hl="+c.language+"&geocode=&q="+q.toUrlValue()+"&ie=UTF8&ll="+q.toUrlValue()+"&t="+p+"&z="+r;t.attr("href",m);if(!i){f=new google.maps.Map2(this);f.addControl(new google.maps.SmallZoomControl());f.setCenter(q,r,s);if(o==""||!a(o)){l=new google.maps.Marker(f.getCenter(),b);f.addOverlay(l);google.maps.Event.addListener(l,"mouseover",function(){f.openInfoWindow(q,document.createTextNode(k))});google.maps.Event.addListener(l,"click",function(){location.href=m})}else{e=new GGeoXml(o);f.addOverlay(e)}}else{if(d==false){d=new google.maps.StreetviewClient()}t.remove();f=new google.maps.StreetviewPanorama(this);google.maps.Event.addListener(f,"error",function(u){switch(u){case NO_NEARBY_PANO:alert(c.errMsgNoData);break;case FLASH_UNAVAILABLE:alert(c.errMsgNoFlash);break;default:alert(c.errMsgUnknown);break}return});d.getNearestPanorama(q,function(u){f.setLocationAndPOV(u.location.latlng,{yaw:j,pitch:g,zoom:r})})}}}})});