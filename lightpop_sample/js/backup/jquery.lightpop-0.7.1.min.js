/**
 * jQuery lightpop plugin
 * This jQuery plugin was inspired on jQuery lightBox plugin by Leandro Vieira Pinho (http://leandrovieira.com/projects/jquery/lightbox/)
 * @name jquery.lightpop-0.7.1.min.js
 * @author wokamoto - http://dogmap.jp
 * @version 0.7.1
 * @date October 20, 2008
 * @category jQuery plugin
 * @copyright (c) 2007-2008 wokamoto (dogmap.jp)
 * @license  Released under the GPL license (http://www.gnu.org/copyleft/gpl.html)
 * @example http://dogmap.jp/lightpop_sample/sample.html
 */
(function(A){A.browser=A.extend({chrome:/chrome/.test(navigator.userAgent.toLowerCase())},A.browser);A.fn.lightpop=function(v){var a="lightpop",B="images/";v=A.extend(true,{overlayBgColor:"#000",overlayOpacity:0.7,contentFrameType:"border",contentBorder:"none",boxBorderSize:6,containerBorderSize:10,containerResizeSpeed:"normal",contentBgColor:"#FFF",imageBox:B+a+"-box.gif",imageBorderL:B+a+"-border-l.gif",imageBorderR:B+a+"-border-r.gif",imageLoading:B+a+"-ico-loading.gif",imageBtnPrev:B+a+"-btn-prev.gif",imageBtnNext:B+a+"-btn-next.gif",imageBtnClose:B+a+"-btn-close.gif",imageBlank:B+a+"-blank.gif",imageBtnPrevWidth:63,imageBtnNextWidth:63,imageBtnCloseWidth:66,txtImage:null,txtOf:"of",setLinkToTitle:false,keyToClose:"c",keyToPrev:"p",keyToNext:"n",flvplayer:"mediaplayer.swf",iconAdd:true,detailsEnabled:true,initSize:250,defaultLater:1500,Image:{enabled:true,icon:B+"icon-image.png",param:{},size:new Array(0,0)},Contents:{enabled:true,icon:B+"icon-contents.png",param:{},size:new Array(0,0),iframeEnabled:true},Video:{enabled:true,icon:B+"icon-video.png",param:{},size:new Array(320,240)},YouTube:{enabled:true,icon:B+"icon-youtube.png",param:{hl:"ja"},size:new Array(425,355)},Metacafe:{enabled:true,icon:B+"icon-metacafe.png",param:{},size:new Array(400,345)},LiveLeak:{enabled:true,icon:B+"icon-liveleak.png",param:{},size:new Array(450,370)},GoogleVideo:{enabled:true,icon:B+"icon-googlevideo.png",param:{hl:"ja"},size:new Array(400,326)},ifilm:{enabled:true,icon:B+"icon-ifilm.png",param:{},size:new Array(448,365)},Dailymotion:{enabled:true,icon:B+"icon-dailymotion.png",param:{},size:new Array(420,330)},superdeluxe:{enabled:true,icon:B+"icon-superdeluxe.png",param:{},size:new Array(400,350)},nicovideo:{enabled:true,icon:B+"icon-nicovideo.png",param:{},size:new Array(312,176)}},v);if(v.imageMaxWidth||v.imageMaxHeight){v=A.extend(true,v,{Image:{size:new Array((v.imageMaxWidth||0),(v.imageMaxHeight||0))}})}var G=(/^border$/i).test(v.contentFrameType);var k=new Array();k.length=0;var AA=document,j=window;var AB=AA.body,z=AA.documentElement,H=AA.images;var I=A.browser.msie,i=A.browser.mozilla,h=A.browser.opera,K=A.browser.safari||A.browser.chrome,S=!(AA.compatMode&&AA.compatMode!=="BackCompat");var g={Image:{match:function(b){return(v.Image.enabled&&(/\.(jpe?g|gif|png|bmp)$/i).test(b))},base:"/",defaultSize:v.Image.size,set:function(b){Y(b,true)},preload:function(b){Y(b,false)}},Video:{match:function(b){return(v.Video.enabled&&(/\.(flv|swf|rm|mov|3gp|mp4|asf|avi|mpg|wmv)$/i).test(b))},defaultSize:v.Video.size,getInfo:function(AG,AF,d,AH,w){var b={};var e=AG.replace(/\?.*$/,"");switch(e.toLowerCase().match(/\.(flv|swf|rm|mov|3gp|mp4|asf|avi|mpg|wmv)$/i)[1]){case"flv":d+=22;e=v.flvplayer+"?file="+e;case"swf":b={quality:"high",bgcolor:"#000"};e=X(e,AF,d,b);break;case"rm":b={autostart:"true",controls:"imagewindow,controlpanel"};e=AE(e,"CFCDAA03-8BE4-11CF-B84B-0020AFBBCCFA","audio/x-pn-realaudio-plugin",AF,d,b,"");break;case"mov":case"mp4":case"3gp":d+=20;b={href:e,controller:"true",pluginspage:"http://www.apple.com/quicktime/download/",autoplay:"true",bgcolor:"000000"};e=AE(e,"02BF25D5-8C17-4B23-BC80-D3488ABDDC6B","video/quicktime",AF,d,b,' codebase="http://www.apple.com/qtactivex/qtplugin.cab"');break;default:d+=20;b={href:e,autostart:"true",uiMode:"full"};e=AE(e,"6BF52A52-394A-11d3-B153-00C04F79FAA6","application/x-oleobject",AF,d,b,"");break}return{content:e,width:AF,height:d,later:Math.round(v.defaultLater*2/3)}}},YouTube:{match:function(b){return(v.YouTube.enabled&&(/\.youtube\.com\/watch/i).test(b))},base:"http://www.youtube.com/v/",defaultSize:v.YouTube.size,getInfo:function(AF,d,AG,AH,b){var e={};var AI=AF.replace(/^.*\?v=(.*)$/i,"$1");var w=b.base+AI;for(var AJ in AH){w+="&"+AJ+"="+AH[AJ]}w=X(w,d,AG,e);return{content:w,width:d,height:AG,later:v.defaultLater}}},Metacafe:{match:function(b){return(v.Metacafe.enabled&&(/\.metacafe\.com\/watch/i).test(b))},base:"http://www.metacafe.com/fplayer/",defaultSize:v.Metacafe.size,getInfo:function(AH,AG,e,AI,AF){var d={};var b=AH.replace(/^.*\/watch\/([\d]+\/[^\/]*)\/?.*$/i,"$1");var w=AF.base+b+".swf";w=X(w,AG,e,d,AI);return{content:w,width:AG,height:e,later:v.defaultLater}}},LiveLeak:{match:function(b){return(v.LiveLeak.enabled&&(/\.liveleak\.com\/view/i).test(b))},base:"http://www.liveleak.com/player.swf?autostart=false&amp;token=",defaultSize:v.LiveLeak.size,getInfo:function(AH,AG,e,AI,AF){var d={quality:"high"};var b=AH.replace(/^.*\?i=(.*)$/i,"$1");var w=AF.base+b;w=X(w,AG,e,d,AI);return{content:w,width:AG,height:e,later:v.defaultLater}}},GoogleVideo:{match:function(b){return(v.GoogleVideo.enabled&&(/video\.google\.com\/videoplay/i).test(b))},base:"http://video.google.com/googleplayer.swf?docId=",defaultSize:v.GoogleVideo.size,getInfo:function(AH,AG,e,AI,AF){var d={flashvars:""};var b=AH.replace(/^.*\?docid=([a-z\d\-]+).*$/i,"$1");var w=AF.base+b;w=X(w,AG,e,d,AI);return{content:w,width:AG,height:e,later:v.defaultLater}}},ifilm:{match:function(b){return(v.ifilm.enabled&&(/\.ifilm\.com\/video/i).test(b))},base:"http://www.ifilm.com/efp",defaultSize:v.ifilm.size,getInfo:function(AH,AG,e,AI,AF){var d={flashvars:"flvbaseclip="+b+"&",quality:"high",bgcolor:"000000"};var b=AH.replace(/\?.*$/,"").replace(/^.*\/video\/([^\/]*)[\/]?$/i,"$1");var w=AF.base;w=X(w,AG,e,d,AI);return{content:w,width:AG,height:e,later:v.defaultLater}}},Dailymotion:{match:function(b){return(v.Dailymotion.enabled&&(/\.dailymotion\.com\/video/i).test(b))},base:"http://www.dailymotion.com/swf/",defaultSize:v.Dailymotion.size,getInfo:function(AH,AG,e,AI,AF){var d={allowFullScreen:"true",allowScriptAccess:"always"};var b=AH.replace(/^.*\/video\/([^_]*).*$/i,"$1");var w=AF.base+b;w=X(w,AG,e,d,AI);return{content:w,width:AG,height:e,later:v.defaultLater}}},superdeluxe:{match:function(b){return(v.superdeluxe.enabled&&(/\.superdeluxe\.com\/sd/i).test(b))},base:"http://i.cdn.turner.com/sdx/static/swf/share_vidplayer.swf",defaultSize:v.superdeluxe.size,getInfo:function(AH,AG,e,AI,AF){var d={allowFullScreen:"true",FlashVars:"id="+b};var b=AH.replace(/^.*\?id=(.*)$/i,"$1");var w=AF.base;w=X(w,AG,e,d,AI);return{content:w,width:AG,height:e,later:v.defaultLater}}},nicovideo:{match:function(b){return(v.nicovideo.enabled&&(/\.nicovideo\.jp\/watch/i).test(b))},base:"http://www.nicovideo.jp/watch/",defaultSize:v.nicovideo.size,getInfo:function(AG,AF,d,AH,w){var b=AG.replace(/^.*\/watch\/(.*)$/i,"$1");var e=w.base+b;e='<iframe width="'+AF+'" height="'+d+'" src="http://www.nicovideo.jp/thumb/'+b+'" scrolling="no" style="border:solid 1px #CCC;" frameborder="0"><a href="'+e+'">'+w.tytle+"</iframe>";return{content:e,width:AF,height:d,later:Math.round(v.defaultLater/3)}}},Contents:{match:function(b){return(v.Contents.enabled&&RegExp(j.location.host,"i").test(b)&&!(/\.(jpe?g|gif|png|bmp)$/i).test(b))},defaultSize:v.Contents.size,set:function(e){var b;var w=Q(k[e].href);var d='width="'+w[0]+'" height="'+w[1]+'"';if(v.Contents.iframeEnabled){b="<iframe "+d+' src="'+k[e].href+'" scrolling="no" style="border:solid 1px #CCC;" frameborder="0"><a href="'+k[e].href+'">'+k[e].tytle+"</a></iframe>";k[e]=A.extend(k[e],{content:b,width:w[0],height:w[1],later:500});u(e)}else{A.get(k[e].href,function(AG,AF){b="<div "+d+">"+AG.replace(/[\r\n]/g,"").replace(/.*<body.*?>(.*?)<\/body>.*$/,"$1").replace(/<script.*?>.*<\/script>/g,"")+"</div>";k[e]=A.extend(k[e],{content:b,width:w[0],height:w[1],later:500});u(e)})}},preload:function(b){},content_css:{textAlign:"left",lineHeight:"1.2em"}}};var r="overlay",L=a,x=a+"-box",s=a+"-content",J=a+"-nav",o=a+"-data",V=a+"-details",U=a+"-loading";var T="#"+r,c="#"+L,R="#"+x,p="#"+s,m="#"+J,C="#"+o,D="#"+V,n="#"+U;var t=function(b){AD(v.imageBtnPrev,function(AH,AF,AG){v.imageBtnPrevWidth=(AF>0?AF:v.imageBtnPrevWidth);AD(v.imageBtnNext,function(AK,AI,AJ){v.imageBtnNextWidth=(AI>0?AI:v.imageBtnNextWidth);AD(v.imageBtnClose,function(AN,AL,AM){v.imageBtnCloseWidth=(AL>0?AL:v.imageBtnCloseWidth);if(!G){AD(v.imageBox,function(AQ,AO,AP){AD(v.imageBorderL,function(AT,AR,AS){AD(v.imageBorderR,function(AW,AU,AV){v.contentBorder="none"})})})}})})});var e=new Array();var d=0;b.filter("a").each(function(){var w=j.location;var AI=A(this);if(!(/^https?:/i).test(AI.attr("href"))&&(/^https?:/i).test(w.protocol)){AI.attr("href",((/^\//i).test(AI.attr("href"))?w.protocol+"//"+w.hostname+"/"+AI.attr("href"):w.href.replace(/^(.*\/).*$/i,"$1")+AI.attr("href").replace(/^\/?(.*)$/i,"$1")))}for(var AG in g){var AF=g[AG];if(AF.match(AI.attr("href").replace(/\?.*$/,""))){var AH=v[AG];if(v.iconAdd&&AI.children("img").length===0){AI.css({background:"transparent url("+AH.icon+") no-repeat scroll 1px 0pt",paddingLeft:"20px"})}k.push({type:AG,href:AI.attr("href"),title:AI.attr("title")||AI.html().replace(/<[^>]*>/ig,""),base:(AF.base?AF.base:"/")});AI.unbind("click").click((function(AJ){return function(){W(AJ);return false}})(d));e.push(this);d++;break}}});return new A(e)};var W=function(AI){F(A("embed, object, select"),false);var AH='<div id="'+s+'-wrap"><div id="'+s+'" /></div>';var w=(v.detailsEnabled?'<div id="'+o+'-wrap"><div id="'+o+'"><div id="'+V+'"><div id="'+V+'-caption" /><div id="'+V+'-number" /></div><div id="'+o+'-nav"><a href="#" id="'+o+'-nav-close"><img src="'+v.imageBtnClose+'" /></a></div></div></div>':"");var AG='<div id="'+J+'"><a href="#" id="'+J+'-prev" /><a href="#" id="'+J+'-next" /></div><div id="'+U+'"><a href="#" id="'+U+'-link"><img src="'+v.imageLoading+'" /></a></div>';var e='<div id="'+r+'" /><div id="'+L+'"><div id="'+x+'"><div id="'+x+'-inner">'+(G?AH+"</div>"+w:'<div id="'+x+'-hd"><div id="'+x+'-hdc" /></div><div id="'+x+'-bd"><div id="'+x+'-bdc">'+AH+w+'</div></div><div id="'+x+'-ft"><div id="'+x+'-ftc" /></div></div>')+AG+"</div></div>";A("body").append(A(e).hide());var AJ=N();var b=E();var d=v.containerBorderSize;A(T).css({position:"absolute",top:0,left:0,backgroundColor:v.overlayBgColor,opacity:v.overlayOpacity,width:AJ[0],height:AJ[1],zIndex:90});A(c).css({position:"absolute",top:b[1]+Math.round(AJ[3]/10),left:b[0],width:"100%",height:0,overflow:"visible",textAlign:"center",lineHeight:0,border:"none",zIndex:100});A(c+" a img").css({border:"none"});A(R).css({position:"relative",width:v.initSize,height:v.initSize,top:0,margin:"0 auto",padding:0,backgroundColor:v.contentBgColor,border:v.contentBorder,overflow:(G?"hidden":"visible")});A(R+"-inner").css({width:v.initSize,height:v.initSize,backgroundColor:"transparent",margin:"0 auto",padding:(G?d:0),overflow:(G?"hidden":"visible")});A(p+"-wrap").css({backgroundColor:"transparent"});A(p).css({margin:(G?0:"0 auto"),padding:(G?0:d+"px 0"),zIndex:110});if(!G){var AF=v.boxBorderSize;Z(false).css({position:"relative"}).hide();A(R+"-hd").css({height:AF,top:0,margin:"0 "+AF+"px 0 0"});A(R+"-hdc").css({height:AF,top:0,margin:"0 "+AF*-1+"px 0 "+AF+"px"});A(R+"-ft").css({height:AF,bottom:0,margin:"0 "+AF+"px 0 0"});A(R+"-ftc").css({height:AF,bottom:0,margin:"0 "+AF*-1+"px 0 "+AF+"px"})}A(m).css({position:"absolute",top:0,left:0,height:"10px",width:"100%",padding:0,margin:(G?"0":v.boxBorderSize+"px")+" auto",zIndex:10});A(m+" a").css({display:"block",height:"100%",zoom:1,margin:(G?0:"0 "+v.boxBorderSize+"px"),outline:"none"});A(m+"-prev").css({width:v.imageBtnPrevWidth,left:0,styleFloat:"left"});A(m+"-next").css({width:v.imageBtnNextWidth,right:0,styleFloat:"right"});A(n).css({position:"absolute",top:"40%",left:0,height:"20%",width:"100%",margin:"0 auto",textAlign:"center",lineHeight:0});if(v.detailsEnabled){A(C+"-wrap").css({font:"10px Verdana, Helvetica, sans-serif",backgroundColor:v.contentBgColor,lineHeight:"1.4em",width:"100%",margin:"0 auto",padding:"0 "+d+"px 0",overflow:"hidden"}).hide();A(C).css({position:"relative",padding:"0 "+d+"px",color:"#666",left:0,bottom:0});A(D).css({width:"70%",styleFloat:"left",textAlign:"left"});A(D+"-caption").css({styleFloat:"left","font-weight":"bold",width:"100%"});A(D+"-number").css({styleFloat:"left",clear:"left",width:"100%","padding-bottom":"1.0em"});A(C+"-nav-close").css({styleFloat:"right",width:v.imageBtnCloseWidth,padding:"0.35em 0"})}A(T).fadeIn(v.containerResizeSpeed,function(){A(c).show()});A(T+","+n+"-link,"+C+"-nav-close").click(function(){f();return false});AC(true);P(AI)};var P=function(b){F(A(C+","+D+","+D+"-caption,"+D+"-number,"+C+"-nav-close"),false);A(m+","+m+"-prev,"+m+"-next").hide();A(p).hide().children().remove();A(n+","+R+","+R+"-inner").show();Z(false);if(v.detailsEnabled&&!G&&K){A(C+"-wrap").height("auto")}u(b)};var u=function(b){(k[b].content?function(d){A(p).append(A(k[d].content));setTimeout(function(){y(d)},k[d].later)}:(g[k[b].type].set?g[k[b].type].set:(function(d){M(d);u(d)})))(b)};var q=function(e,d,b,w){if(v.detailsEnabled){w=(w<28?28:w);b+=w}(G?(function(AF){A(R).animate({width:d,height:b},"fast",function(){F(AF,true)})}):(function(AF){if(v.detailsEnabled&&K){A(C+"-wrap").height(w)}F(AF,true)}))(e)};var y=function(AI){var e=v.containerBorderSize,AH=v.boxBorderSize;var b=k[AI];var w=b.width+(e+(G?0:AH))*2;var d=b.height+e*2;var AF=N();var AG=E();A(c).animate({top:AG[1]+Math.round(AF[3]/10),left:AG[0]},v.containerResizeSpeed,function(){A(R).animate({width:w,height:d},v.containerResizeSpeed,function(){var AJ=g[b.type];A(R+"-inner").css({width:(G?b.width:w),height:b.height});A(p).css({width:b.width,height:b.height});if(v.detailsEnabled){A(C+"-wrap").css({width:b.width})}if(AJ.content_css){A(p).children().css(AJ.content_css)}A(n).hide();if((/<object.*>/i).test(b.content)){A(p).show()}else{A(p).fadeIn()}Z(true);A(D+"-caption").html((v.setLinkToTitle?'<a href="'+b.href+'" title="'+b.title+'">'+b.title+"</a>":b.title));A(D+"-number").html((v.txtImage||b.type)+(k.length>1?" "+(AI+1)+" "+v.txtOf+" "+k.length:""));var AK=F(A(C+","+D+","+D+"-caption,"+D+"-number,"+C+"-nav-close"),false).show();(v.detailsEnabled?function(AN,AL,AM){A(C+"-wrap").slideDown("fast",function(){q(AN,AL,AM,(!K?A(this).height():this.scrollHeight))})}:function(AN,AL,AM){q(AN,AL,AM)})(AK,w,d);A(m).css({width:w}).show(function(){A(m+"-prev,"+m+"-next").css({height:Math.round(d/3),background:"transparent url("+v.imageBlank+") no-repeat"}).unbind();if(AI!=0){A(m+"-prev").hover(function(){A(this).css({background:"url("+v.imageBtnPrev+") left 30% no-repeat"})},function(){A(this).css({background:"transparent url("+v.imageBlank+") no-repeat"})}).show().click((function(AL){return function(){P(AL);return false}})(AI-1))}if(AI!=(k.length-1)){A(m+"-next").hover(function(){A(this).css({background:"url("+v.imageBtnNext+") right 30% no-repeat"})},function(){A(this).css({background:"transparent url("+v.imageBlank+") no-repeat"})}).show().click((function(AL){return function(){P(AL);return false}})(AI+1))}l(true,AI)});if(k.length-1>AI){O(AI+1)}if(AI>0){O(AI-1)}})})};var O=function(b){if(!k[b].content){(g[k[b].type].preload?g[k[b].type].preload:(function(d){M(d)}))(b)}};var Q=function(e,d,AH){var AG=0,b=0;var w=e.toLowerCase().replace(/[\r\n]/g,"").replace(/["']/g,"").match(/(width|height)=(\d+)/ig);if(w){A.each(w,function(){if((/^width=\d+$/i).test(this)){AG=Number(this.replace(/^width=(\d+)$/,"$1"))}if((/^height=\d+$/i).test(this)){b=Number(this.replace(/^height=(\d+)$/,"$1"))}})}if(AG===0||b===0){if(d){AG=d[0];b=d[1]}else{var AF=N();AG=AF[0]/4;b=AF[1]/4}}if(AH){if(AH[0]!=0&&AG>AH[0]){b=b*(AH[0]/AG);AG=AH[0]}if(AH[1]!=0&&b>AH[1]){AG=AG*(AH[1]/b);b=AH[1]}}return new Array(Math.round(AG),Math.round(b))};var M=function(AJ){var e=k[AJ];var b=v[e.type];var w=g[e.type];var AG=e.href.replace(/&.*$/i,"");var d,AH={};var AI,AF=null;if((/\?.*$/).test(e.href)){var AK=e.href.replace(/^.*\?/,"").split("&");if(AK.length>0){A.each(AK,function(){var AM,AL=this.toString();if(!(/^(width|height|v|i|docid|id)\=.*$/i).test(AL)){AM=(AL).match(/^([^=]*)=(.*)$/i);if(AM.length>2){AH[AM[1]]=AM[2]}}})}}AH=A.extend(AH,b.param);d=Q(e.href,w.defaultSize);k[AJ]=A.extend(e,w.getInfo(AG,d[0],d[1],AH,e))};var X=function(d,AF,b,AH,AG){var w="";if(typeof AG==="object"){A.each(AG,function(AI){if(d.indexOf(AI+"=")<0){d+=(d.indexOf("?")<0?"?":"&")+AI+"="+this}})}var e={movie:d,wmode:"transparent"};AH=(AH?A.extend(e,AH):e);w='<object width="'+AF+'" height="'+b+'" data="'+d+'" type="application/x-shockwave-flash" wmode="'+AH.wmode+'">';A.each(AH,function(AI){w+='<param name="'+AI+'" value="'+this+'" />'});w+="</object>";return w};var AE=function(d,AG,AJ,e,AK,AF,AL,b){var AI="",w="";var AH={src:d,width:e,height:AK,type:AJ};AF=(AF?A.extend(AH,AF):AH);AI+='<object width="'+e+'" height="'+AK+'"'+(AG!=" "?'classid="clsid:'+AG+'"':"")+' type="'+AJ+'" '+b+">";w+='<embed width="'+e+'" height="'+AK+'"';A.each(AF,function(AM){AI+='<param name="'+AM+'" value="'+this+'" />';w+=" "+AM+'="'+this+'"'});w+='><noembed><a href="'+d+'">'+d+"</a></noembed></embed>";AI+=w+"</object>";return AI};var Z=function(AG){if(!G){var AF=A(R+"-hd, "+R+"-hdc, "+R+"-bd, "+R+"-bdc, "+R+"-ft, "+R+"-ftc");var e="transparent",d=v.contentBgColor;if(AG){var b=v.imageBox,AH=v.imageBorderL,w=v.imageBorderR;A(R).css({backgroundColor:e});A(R+"-hd").css({background:e+" url("+b+") left top no-repeat"});A(R+"-hdc").css({background:e+" url("+b+") right top no-repeat"});A(R+"-bd").css({background:d+" url("+AH+") left top repeat-y"});A(R+"-bdc").css({background:e+" url("+w+") right top repeat-y"});A(R+"-ft").css({background:e+" url("+b+") left bottom no-repeat"});A(R+"-ftc").css({background:e+" url("+b+") right bottom no-repeat"});AF.show()}else{A(R).css({backgroundColor:d});AF.css({background:e})}return AF}};var Y=function(d,b){AD(k[d].href,(function(w,e){return function(AH,AG,AF){var AI=Q(AH,new Array(AG,AF),v.Image.size);k[w]=A.extend(k[w],{content:'<img src="'+AH.replace(/\?.*$/,"")+'" width="'+AI[0]+'" height="'+AI[1]+'" />',width:AI[0],height:AI[1],later:(I?250:100)});if(e){u(w)}}})(d,b))};var AD=function(b,AI,AG,e,AJ){AI=AI||function(){};AG=AG||function(){};e=e||10;AJ=AJ||2000;for(var d=0,AH=H.length;d<AH;++d){if(H[d].src===b&&H[d].complete){AI(b,H[d].width,H[d].height);return }}var w=new Image(),AF=0;w.finish=false;w.onabort=w.onerror=function(){if(w.finish){return }w.finish=true;AG(b)};w.onload=function(){w.finish=true;if(h&&!w.complete){AG(b);return }AI(b,w.width,w.height)};w.src=b;if(!w.finish&&AJ){setTimeout(function(){if(w.finish){return }if(w.complete){w.finish=true;if(w.width){return }AG(b);return }if((AF+=e)>AJ){w.finish=true;AG(b);return }setTimeout(arguments.callee,e)},0)}};var F=function(d,b){return d.css({visibility:(b?"visible":"hidden")})};var l=function(b,d){A(AA).unbind("keydown");if(b){A(AA).keydown(function(AF){var e=(AF||event).keyCode;var w=(AF?AF.DOM_VK_ESCAPE:27);var AG=String.fromCharCode(e).toLowerCase();if((AG==v.keyToClose)||(AG=="x")||(e==w)){f()}else{if(((AG==v.keyToPrev)||(e==37))&&d!=0){P(d-1)}else{if(((AG==v.keyToNext)||(e==39))&&d!=(k.length-1)){P(d+1)}}}})}};var AC=function(b){A(j).unbind("resize");if(b){A(j).resize(function(){var d=N();var e=E();A(T).css({width:d[0],height:d[1]});A(c).css({top:e[1]+Math.round(d[3]/10),left:e[0]})})}};var N=function(){var b=(z&&z.scrollWidth?z:AB).scrollWidth;var e=(z&&z.scrollHeight?z:AB).scrollHeight;var d=(S?AB:z).clientWidth;var w=(S?AB:z).clientHeight;b=(b<d?b:d);e=(e<w?w:e);return new Array(b,e,d,w)};var E=function(){var b=(z&&z.scrollLeft?z:AB).scrollLeft;var d=(z&&z.scrollTop?z:AB).scrollTop;return new Array(b,d)};var f=function(){F(A("object",A(c)),false).remove();A(c).height(A(R).height()).slideUp(function(){A(this).remove();A(T).fadeOut(function(){A(this).remove();F(A("embed, object, select"),true)})});l(false);AC(false)};return t(this)}})(jQuery);